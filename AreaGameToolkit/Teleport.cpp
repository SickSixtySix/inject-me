// InjectMe
#include "AsdaGlobalHook.hpp"
#include "AsdaGlobalPacketFactory.hpp"

using namespace InjectMe::Utils;
using namespace InjectMe::Network;
using namespace InjectMe::Hook::AsdaGlobal;

// Cheat
#include "Teleport.hpp"

namespace Cheat::Teleport
{
	// Шаблон пакета 5055
	sf::Uint8 Packet5055[] =
	{
		0x00, 0x00, 0x14, 0x00, 0xBF, 0x13, 0x01, 0x33,
		0x34, 0x2E, 0x32, 0x33, 0x36, 0x2E, 0x31, 0x35,
		0x37, 0x2E, 0x31, 0x37, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0xF1, 0x3C, 0x01, 0x00, 0x27,
		0x01, 0xEB, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0x24, 0xA5, 0xC7, 0x39, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
	};

	// Размер шаблона пакета 5055
#define Packet5055Size (sizeof(Packet5055) / sizeof(Packet5055[0]))

	void Teleport(Proxy *proxy, sf::Uint16 mapID, sf::Uint16 posX, sf::Uint16 posY)
	{
		Buffer packet5055;
		packet5055.Write(4, Packet5055);
		packet5055.Write(33, mapID);
		packet5055.Write(35, posX);
		packet5055.Write(37, posY);
		packet5055.SetOffset(4 + Packet5055Size);
		proxy->SendServerPacket(5055, packet5055);
		SetMapID(mapID);
	}
}